# 灵触·随行 (TactileNav)

视障人士触觉导航辅助系统 —— 把周围环境变成手指能「摸到」的地图。

## 快速开始

```bash
npm install    # 第一次拉代码后，装依赖
npm run dev    # 启动本地开发服务器，浏览器打开显示的地址就能看到界面
npm run build  # 打包（一般开发时不需要）
```

## 项目结构一览

```
├── 初赛文档.md          ← 最完整的项目说明，不确定的时候先看这个
├── claude.md            ← 给 AI 助手看的上下文（也可以当速查手册用）
│
├── index.html           ← 网页入口，里面还包含全局的 CSS 样式
├── package.json         ← 项目依赖和脚本配置（npm install 读的就是这个）
├── vite.config.js       ← 构建工具 Vite 的配置（一般不用动）
│
└── src/                 ← 所有源代码都在这里
    ├── main.js          ← 程序入口：把算法层、硬件层、集成层串起来，然后启动 Vue
    ├── App.vue          ← 根组件：页面顶部的标签栏（状态/调试/演示/点阵测试）
    │
    ├── core/            ← 核心逻辑（三层架构）
    │   ├── constants.js      ← 全局常量：点阵尺寸 31×21、模式定义、自身点位置等
    │   ├── AlgorithmLayer.js ← 【算法层】把摄像头数据变成 651 个点的数组
    │   ├── HardwareLayer.js  ← 【硬件层】把点阵数据通过蓝牙发给盲杖
    │   └── Integration.js    ← 【集成层】管开关、管模式切换、管定时刷新
    │
    ├── components/      ← 页面组件
    │   ├── StatusPage.vue    ← 「状态」标签页：显示连接状态、帧率、错误信息
    │   ├── DebugPage.vue     ← 「调试」标签页：启动/停止、切换模式、调帧率
    │   ├── DemoPage.vue      ← 「演示」标签页：大字显示当前模式 + 点阵实时预览
    │   └── GridPreview.vue   ← 点阵可视化：把 651 个数字画成 31×21 的小圆点
    │
    └── test/            ← 点阵测试工具（独立于上面的三层逻辑）
        ├── DotMatrix.vue     ← 点阵渲染器：能看到点的「高低起伏」效果
        └── ControlPanel.vue  ← 控制台：点击格子改值、加载预设动画、调速播放
```

## 数据怎么流动的

简单说就是一条线：

```
摄像头 → AlgorithmLayer（生成 651 个 0/1/2）
              ↓
         Integration（定时拉数据、管模式）
              ↓
         HardwareLayer（发蓝牙给盲杖）
              ↓
         触觉点阵（手指摸到凸起）
```

同时 Integration 会把状态同步给 Vue 界面，所以页面上能实时看到帧率、模式这些信息。

## 三个部分，谁做什么

| 部分 | 文件 | 现在的状态 | 要做什么 |
|------|------|-----------|---------|
| 算法层 | `AlgorithmLayer.js` | 返回随机假数据 | 接摄像头 → 跑深度估计模型 → 输出真实的点阵数据 |
| 硬件层 | `HardwareLayer.js` | 空壳，只打日志 | 实现蓝牙连接、数据发送、按钮接收 |
| 前端 UI | `components/` + `App.vue` | 基础框架能跑 | 加配置页、做无障碍适配、适配手机屏幕 |

## 几个关键概念

- **grid**：一个长度 651 的数组（31行 × 21列），每个值是 0、1 或 2
  - 0 = 没东西，安全
  - 1 = 远处有障碍，注意一下
  - 2 = 近处有危险，赶紧避开
- **自身点**：第 20 行第 10 列（从 0 数起），就是「你在这里」
- **地图模式 (MAP)**：鸟瞰视角，看四周所有障碍，刷新快（5次/秒）
- **放大模式 (ZOOM)**：侧面视角，看前方 1 米内的高度变化（台阶、门槛），刷新慢（2次/秒）
